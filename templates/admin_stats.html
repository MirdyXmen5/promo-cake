{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2 class="mb-4 text-center">üìä –û—Ç—á–µ—Ç –¥–ª—è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞</h2>

    <div class="row mb-4 text-center">
        <div class="col-md-4">
            <div class="card text-white bg-primary mb-3 shadow">
                <div class="card-header">–í—Å–µ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
                <div class="card-body">
                    <h1 class="card-title">{{ total_scans }}</h1>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-success mb-3 shadow">
                <div class="card-header">–í—ã–¥–∞–Ω–æ –¥–µ–Ω–µ–≥ (‚Ç∏)</div>
                <div class="card-body">
                    <h1 class="card-title">{{ total_money | int }} ‚Ç∏</h1>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-warning mb-3 shadow">
                <div class="card-header">–í—ã–∏–≥—Ä—ã—à–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤</div>
                <div class="card-body">
                    <h1 class="card-title">{{ total_wins }}</h1>
                </div>
            </div>
        </div>
    </div>

    {% if suspicious %}
    <div class="card mb-4 border-danger">
        <div class="card-header bg-danger text-white">
            üö® <b>–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</b> (–û—à–∏–±–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä—ã)
        </div>
        <div class="card-body">
            <ul class="list-group list-group-flush">
            {% for user, count in suspicious %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å <b>{{ user }}</b>
                    <span class="badge bg-danger rounded-pill">{{ count }} —Ä–∞–∑(–∞) –æ—à–∏–±—Å—è/–ø–æ–≤—Ç–æ—Ä–∏–ª</span>
                </li>
            {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}

    <div class="card shadow">
        <div class="card-header bg-dark text-white">
            üìú –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π (–ü–æ—Å–ª–µ–¥–Ω–∏–µ 50)
        </div>
        <div class="table-responsive">
            <table class="table table-hover table-striped mb-0">
                <thead>
                    <tr>
                        <th>–í—Ä–µ–º—è</th>
                        <th>–î–∏—Ä–µ–∫—Ç–æ—Ä</th>
                        <th>–ö–æ–¥</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–î–µ—Ç–∞–ª–∏</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs %}
                    <tr>
                        <td>{{ log.timestamp.strftime('%d.%m %H:%M') }}</td>
                        <td><b>{{ log.username }}</b></td>
                        <td><small>{{ log.code_input }}</small></td>
                        <td>
                            {% if log.status == 'WIN' %}
                                <span class="badge bg-success">–í–´–ò–ì–†–´–®</span>
                            {% elif log.status == 'LOSE' %}
                                <span class="badge bg-secondary">–ü–£–°–¢–û</span>
                            {% elif log.status == 'ERROR' %}
                                <span class="badge bg-danger">–û–®–ò–ë–ö–ê</span>
                            {% elif log.status == 'USED_AGAIN' %}
                                <span class="badge bg-warning text-dark">–ü–û–í–¢–û–†</span>
                            {% endif %}
                        </td>
                        <td>{{ log.details }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="text-center mt-4 mb-5">
        <a href="/" class="btn btn-outline-primary btn-lg">‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–∫–∞–Ω–µ—Ä—É</a>
    </div>
</div>
{% endblock %}